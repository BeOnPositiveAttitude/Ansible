# модули lineinfile и blockinfile могут быть использованы, чтобы сделать простые изменения в файлах
# для внесения более сложных изменений используйте Jinja2 шаблоны
# при использовании шаблонов целевые файлы автоматически изменяются используя переменные и факты
# в Jinja2 шаблоне вы можете найти следующие элементы:
# data, variables, expressions, control structures
# переменная в шаблоне заменяется ее значением, когда Jinja2 шаблон рендерится в целевой файл на управляемой ноде
# если используются переменные, они могут быть указаны используя секцию vars в плейбуке
# также могут быть использованы Ansible facts
# для предотвращения перезаписи файлов (которые управляются Ansible) администраторами установите строку ansible_managed:
# во-первых в ansible.cfg установите ansible_managed = Ansible managed
# наверху Jinja2 шаблона установите переменную {{ ansible_managed }}

# в Jinja2 шаблонах могут быть использованы control structures для организации шаблона оптимальным путем
# выражение for может быть использовано для итерации по переменной и использованию всех значений этой переменной (в случае multi-valued)
# выражение if может быть использовано для работы шаблона с переменной, если другая переменная определена