# чтобы создать свою собственную роль, используйте команду ansible-galaxy init myrole для созданий структуры директорий роли
# обращайте внимание на расположение структуры директорий роли, вы можете положить роль в локальную директорию с проектом или же в директорию доступную для всех проектов
# заполните необходимые файлы роли как мы обсуждали до этого

# каждая роль должна иметь свой собственный репозиторий в системе контроля версий
# не помещайте чувствительную информацию в роль, лучше в локальный плейбук или Ansible Vault вместо этого
# используйте ansible-galaxy init для создания структуры роли
# не забудьте отредактировать README.md и meta/main.yml содержащие документацию о вашей роли
# Роли должны быть выделены для одной задачи/функции. Используйте несколько ролей для управления несколькими задачами/функциями
# обратите внимание на существующие (Galaxy) роли перед началом написание своей собственной роли

# meta/main.yml может быть использован для определения зависимостей роли
# зависимости приведенные здесь будут автоматически установлены при использовании роли

# conditional роли вызывают роль динамически, используя include_role модуль
# это делает так, что conditional роли больше рассматриваются как tasks
# conditional роли могут быть объединены с условными выражениями
# таким образом роль будет запущена только если условное выражение верно
# для этого используйте include_role в task-е 

---
- hosts: lamp
  tasks:
  - include_role:
      name: lamp
    when: "ansible_facts['os_family'] == 'RedHat'" 
